# 交互式光学实验室 - 用户指南 (v2.0)

## 1. 概述

欢迎使用交互式光学实验室！这是一个基于 Web 的强大而直观的仿真工具，旨在帮助您探索奇妙的光学世界。

**🌐 在线访问：** [https://tryandaction.github.io/Interactive-Optics-Lab](https://tryandaction.github.io/Interactive-Optics-Lab)

**核心特点：**
- 🚀 **零安装** - 直接访问网页即可使用
- 💾 **本地存储** - 所有数据保存在浏览器中
- 🔓 **完全免费** - 开源项目，无需注册

## 2. 界面布局

模拟器界面主要分为四个区域：

- **顶部菜单栏:** 文件操作、编辑、视图、模拟、帮助
- **左侧工具栏:** 所有可用的光学元件，按类别分组
- **中间模拟区域 (画布):** 主要工作区域，放置和操作元件
- **右侧检查器面板:** 包含多个标签页
  - **属性:** 编辑选中元件的参数
  - **设置:** 全局模拟参数调整
  - **项目:** 管理本地项目和场景
  - **信息:** 关于模拟器的信息

## 3. 主要特性

### 直观交互
- **添加元件:** 点击工具栏按钮，然后在画布上单击放置
- **选择元件:** 直接点击元件（Shift/Ctrl+点击可多选）
- **移动元件:** 拖动选中元件
- **旋转元件:** 拖动角度控制柄，或悬停时滚动鼠标滚轮
- **撤销/重做:** Ctrl+Z / Ctrl+Y

### 丰富元件库
- **光源:** 点光源(激光)、扇形光源、线光源、白光光源
- **透镜:** 薄透镜 (凸/凹)
- **反射镜:** 平面镜、球面镜、抛物面镜
- **折射/色散:** 棱镜、介质块
- **衍射:** 衍射光栅、光阑/多缝、声光调制器
- **偏振:** 偏振片、半波片、四分之一波片
- **光束控制:** 分束器、光纤
- **AMO元件:** 法拉第隔离器、法拉第旋光器、光隔离器
- **探测:** 屏幕、光度计

### 视图控制
- **缩放:** 鼠标滚轮或双指捏合
- **平移:** 按住鼠标中键拖动或双指拖动
- **重置视图:** 通过"视图"菜单

### 模拟模式
- **光线追踪:** 默认模式，模拟光线传播与物理效应
- **透镜成像:** 绘制理想薄透镜成像的主光路图
- **专业绘图:** 用于创建论文发表级的光路图（见第11节）

## 4. 快速入门

1. **开始:** 访问网页后画布为空
2. **添加元件:** 点击左侧工具栏图标，在画布上点击放置
3. **观察:** 光线会自动从光源发出并与元件交互
4. **调整:** 选中元件后，在右侧"属性"标签页修改参数
5. **保存:** 打开"场景"标签页，点击"保存当前场景"

## 5. 场景管理

### 本地场景
- 所有场景保存在浏览器的 LocalStorage 中
- 支持保存、加载、删除场景
- 支持导出为 JSON 文件分享给他人
- 支持导入他人分享的 JSON 文件

### 项目管理
- 创建项目来组织多个相关场景
- 项目数据同样保存在本地浏览器中
- 支持导出项目文件进行备份或分享

## 6. 全局设置

在右侧"设置"标签页中可调整：

- **显示网格:** 控制画布背景网格
- **启用网格吸附:** 拖动元件时自动吸附到网格点
- **显示箭头:** 控制光路动画箭头
- **箭头速度:** 调整动画箭头的速度
- **每源最大光线数:** 限制光线数量（影响性能）
- **最大反/折射次数:** 光线追踪的最大弹射次数
- **最低强度阈值:** 光线强度低于此值时停止追踪
- **快速白光模拟:** 切换白光光源的光线生成方式

## 7. 快捷键

```
Ctrl + N    新建场景
Ctrl + S    保存场景
Ctrl + E    导出文件
Ctrl + Z    撤销
Ctrl + Y    重做
Delete      删除选中元件
Space       平移画布（按住拖动）
G           显示/隐藏网格
R           旋转选中元件
```

## 8. 使用建议

- **由简入繁:** 从简单设置开始，理解元件行为，再组合
- **善用视图:** 缩放和平移对于观察细节很重要
- **关注属性:** 通过右侧"属性"标签精确控制元件参数
- **利用设置:** 根据需要调整参数以平衡效果和性能
- **保存场景:** 经常保存你的工作
- **利用撤销:** 不怕操作失误，随时可以撤销

## 9. 数据安全

- ✅ 所有数据存储在浏览器 LocalStorage
- ✅ 无服务器上传，完全本地化
- ✅ 不收集任何用户数据
- ⚠️ 清除浏览器数据会丢失场景，建议定期导出备份

## 10. 常见问题

### Q: 场景数据会丢失吗？
A: 场景保存在浏览器的 LocalStorage 中。清除浏览器数据或使用隐私模式会导致数据丢失。建议定期导出 JSON 文件备份。

### Q: 可以在不同设备间同步吗？
A: 目前不支持自动同步。您可以通过导出/导入 JSON 文件在不同设备间手动传输场景。

### Q: 光线不显示怎么办？
A: 检查光源是否开启，强度是否足够。也可以在"设置"中调低"最低强度阈值"。

### Q: 性能下降怎么办？
A: 减少光线数量、降低最大反射次数、关闭箭头动画可以提升性能。

## 11. 专业绘图模式

专业绘图模式是为科研人员设计的功能，用于创建符合学术出版标准的高质量光路图。

### 进入绘图模式
- **方式一:** 点击顶部菜单栏右侧的模式切换器，选择"绘图"
- **方式二:** 通过"模拟"菜单 → "模式: 专业绘图"

### 核心功能

#### 符号库
在绘图模式下，光学元件会使用标准化的学术符号渲染：
- 激光器、反射镜、透镜、AOM、分束器、偏振片等
- 支持自定义符号大小、颜色、线宽

#### 智能标注
- 为元件添加专业标注（如 `AOM₁: +113MHz`）
- 支持上下标语法：`_` 表示下标，`^` 表示上标
- 自动定位，避免重叠
- 支持手动调整位置

#### 布局工具
- **网格吸附:** 元件自动对齐到网格
- **角度吸附:** 旋转时吸附到常用角度（15°、45°、90°）
- **对齐工具:** 水平/垂直对齐多个元件
- **均匀分布:** 等间距排列元件
- **元件分组:** 将多个元件组合为一组

#### 高质量导出
- **SVG格式:** 矢量图形，无限缩放不失真
- **PNG格式:** 支持300DPI高分辨率
- **PDF格式:** 直接用于论文投稿
- **预览功能:** 导出前实时预览效果
- **裁剪工具:** 选择导出区域

#### 预设模板
- **期刊论文:** 3000×2000px, 300DPI
- **演示文稿:** 1920×1080px, 150DPI
- **海报:** 4000×3000px, 300DPI
- 支持保存自定义模板

#### 批量导出
- 选择多个场景一次性导出
- 自定义文件命名模式
- 显示导出进度

### 使用建议
1. 先在模拟模式下设计好光路
2. 切换到绘图模式进行美化
3. 添加标注和技术说明
4. 使用布局工具对齐元件
5. 选择合适的模板导出

---

**版本:** v2.0 (纯前端版本)
**更新日期:** 2026年1月
